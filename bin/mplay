#!/bin/bash -e

FIFO="/tmp/mplayer_fifo-$BASHPID";
IFS=$'\n';

function finish {
  rm -f "$FIFO";
}
trap finish EXIT


if [ ! -f "$FIFO" ]; then
  mkfifo $FIFO;
fi

for i in `find $1 -type f -printf '%p\n' | sort`;
do
  mplayer -slave -input file="$FIFO" "$i";
  if [ $? -ne 0 ]; then
    exit;
  fi
done;
